# 习思想示范案例详情页实现说明

## 概述
根据 Figma 设计稿实现了"习思想融入学科教学实践示范案例展播"的详情页面。

## 实现内容

### 1. API 接口对接

#### 文件：`src/api/redCulture.ts`

**新增数据结构：**
```typescript
export interface XiThoughtExampleVideo {
  id: number          // 业务id
  name: string        // 课程名称
  coverUrl: string    // 封面
  createTime: string  // 发布时间
  teachers?: Array<{  // 主讲教师信息
    name: string
    title?: string
  }>
  property?: string   // 课程性质
  direction?: string  // 入选方向
  college?: string    // 所在学院
  content?: string    // 思政元素
  videoUrl?: string   // 案例视频
  statPv?: number     // 浏览量
}
```

**新增 API 函数：**
1. `getXiThoughtExampleTopList()` - 获取示例案例展播 Top 列表
   - 接口：`GET /api/xiThought/exampleExpo/top/list`
   
2. `getXiThoughtExampleDetail(id)` - 获取示例案例详情
   - 接口：`GET /api/xiThought/exampleExpo/get/:id`

### 2. 详情页面创建

#### 文件：`src/views/portal/Topics/ExampleDetail.vue`

**页面结构：**
- **面包屑导航**：您的位置 → 习思想的伟大实践 → ... → 视频详情
- **左侧信息卡片**（宽 364px）：
  - 课程封面图
  - 课程名称
  - 主讲教师列表
  - 案例名称
  - 课程性质
  - 入选方向
  - 学院类型
  - 思政元素（完整描述）
  
- **右侧视频播放区**（flex: 1）：
  - 标题和观看次数
  - 视频播放器
  
- **底部推荐区域**：
  - "其他示范案例展播"标题
  - 查看更多按钮
  - 4 个推荐案例卡片（网格布局）

**设计特点：**
- 背景：淡黄色渐变 + 图案纹理（opacity: 0.2）
- 卡片边框：#fdd4a6
- 主色调：#bc2220（标题、重点信息）
- 圆角：16px（卡片）、8px（图片、视频）

### 3. 路由配置

#### 文件：`src/router/modules/portal.ts`

新增路由：
```typescript
{
  path: 'topics/example/:id',
  name: 'TopicsExampleDetail',
  component: () => import('@/views/portal/Topics/ExampleDetail.vue'),
  meta: {
    title: '示范案例详情',
    requiresAuth: false,
    roles: []
  }
}
```

### 4. 列表页点击事件

#### 文件：`src/views/portal/Topics/index.vue`

**修改内容：**
1. 导入新的 API 函数和类型
2. 添加 `convertExampleVideoToCourse` 函数转换数据格式
3. 添加 `fetchExampleList` 函数获取 list2 数据
4. 添加 `handleExampleClick` 函数处理 list2 点击事件
5. 修改 list2 的点击事件绑定：`@click="handleExampleClick(course)"`

**路由跳转：**
- list1（习思想优秀视频展播）→ `/topics/video/:id`
- list2（示范案例展播）→ `/topics/example/:id`

## 数据流程

```
1. 用户访问 /topics 页面
   ↓
2. 页面加载时调用 fetchExampleList()
   ↓
3. 请求 GET /api/xiThought/exampleExpo/top/list
   ↓
4. 返回示例案例列表数据
   ↓
5. 转换为 Course 格式并显示在 list2
   ↓
6. 用户点击 list2 中的卡片
   ↓
7. 调用 handleExampleClick()，跳转到 /topics/example/:id
   ↓
8. ExampleDetail 页面加载
   ↓
9. 调用 fetchExampleDetail() 获取详情
   ↓
10. 请求 GET /api/xiThought/exampleExpo/get/:id
   ↓
11. 显示详情数据和推荐列表
```

## 核心功能

### 1. 数据获取
- ✅ 获取示例案例列表（Top 8）
- ✅ 获取示例案例详情
- ✅ 获取推荐案例列表

### 2. 页面展示
- ✅ 面包屑导航
- ✅ 左侧信息卡片（带背景纹理）
- ✅ 右侧视频播放器
- ✅ 底部推荐列表
- ✅ 观看次数格式化（10w+）

### 3. 交互功能
- ✅ 点击面包屑返回上级页面
- ✅ 视频播放控制
- ✅ 点击推荐案例跳转详情
- ✅ 点击"查看更多"返回列表

## 样式实现

根据 Figma 设计稿，使用 Vue 3 + CSS 实现：
- **布局**：Flexbox
- **响应式**：固定宽度 1440px 居中
- **颜色**：
  - 主色红：#BC2220
  - 基础黑：#333333
  - 背景色：#FFF9ED
  - 卡片背景：#ECDDB9
  - 边框：#FDD4A6
- **字体**：Source Han Sans CN
- **圆角**：8px / 16px
- **间距**：24px / 64px

## 测试建议

1. **功能测试**
   - ✅ 列表页面显示正常
   - ✅ 点击卡片跳转到详情页
   - ✅ 详情页数据加载正常
   - ✅ 视频播放功能正常
   - ✅ 推荐列表显示和跳转正常

2. **边界情况**
   - 数据为空时的显示
   - 图片加载失败的处理
   - 视频加载失败的处理
   - 无推荐数据时的显示

3. **UI 还原度**
   - 与 Figma 设计稿对比
   - 间距、颜色、字体大小
   - 响应式布局

## 文件清单

```
src/
├── api/
│   └── redCulture.ts                    # 新增 API 接口
├── router/
│   └── modules/
│       └── portal.ts                    # 新增路由配置
└── views/
    └── portal/
        └── Topics/
            ├── index.vue                # 修改：添加 list2 数据获取和点击事件
            └── ExampleDetail.vue        # 新建：示例案例详情页
```

## 访问路径

- **列表页**：http://localhost:5177/topics
- **详情页**：http://localhost:5177/topics/example/:id

例如：http://localhost:5177/topics/example/123

## 注意事项

1. 详情页与视频展播详情页（VideoDetail.vue）是不同的页面
2. list2 使用独立的 API 接口和路由
3. 数据结构与视频展播不同（teachers 数组、property、direction 等）
4. 推荐列表自动过滤掉当前案例

## 下一步优化建议

1. 添加加载状态（Loading 组件）
2. 添加错误处理和提示
3. 优化视频播放器功能（进度保存、倍速播放等）
4. 添加分享功能
5. 添加收藏功能
6. SEO 优化（meta 标签）

