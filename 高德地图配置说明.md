# 高德地图配置说明

## 一、获取高德地图 API Key

### 1. 注册高德开放平台账号
访问：https://lbs.amap.com/

点击右上角"注册/登录"按钮，使用手机号注册账号。

### 2. 创建应用
1. 登录后，进入控制台：https://console.amap.com/dev/key/app
2. 点击"创建新应用"
3. 填写应用信息：
   - 应用名称：福州大学-大思政课数智化平台
   - 应用类型：Web端(JS API)

### 3. 添加 Key
1. 在应用列表中，点击"添加"按钮
2. 填写 Key 信息：
   - Key 名称：Web端Key
   - 服务平台：Web端(JS API)
   - 白名单：可以暂时留空（开发环境），生产环境建议配置域名白名单

### 4. 获取 Key
创建成功后，你会得到一个 Key，格式类似：`a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`

## 二、配置项目中的 API Key

### 方法一：直接替换（适合开发环境）

在 `src/views/portal/Study/index.vue` 文件中，找到以下代码：

```typescript
const AMap = await AMapLoader.load({
  key: "您的高德地图key",  // 请替换为您的高德地图key
  version: "2.0",
  plugins: ["AMap.Scale", "AMap.ToolBar", "AMap.Marker"]
})
```

将 `"您的高德地图key"` 替换为你获取的真实 Key。

### 方法二：使用环境变量（推荐用于生产环境）

1. 在项目根目录创建 `.env.local` 文件：

```env
VITE_AMAP_KEY=你的高德地图Key
```

2. 修改代码：

```typescript
const AMap = await AMapLoader.load({
  key: import.meta.env.VITE_AMAP_KEY,
  version: "2.0",
  plugins: ["AMap.Scale", "AMap.ToolBar", "AMap.Marker"]
})
```

3. 确保 `.env.local` 已添加到 `.gitignore` 文件中，避免提交到代码仓库。

## 三、功能说明

### 已实现功能

1. **地图展示**：在"红色文化资源地图"区块展示福州地区的高德地图
2. **资源列表**：左侧展示红色文化资源列表，包含7个示例资源点
3. **点击交互**：点击左侧资源列表项时，地图会：
   - 自动定位到该资源的位置
   - 在地图上添加红色标记点
   - 自动弹出信息窗口显示资源详情
4. **资源详情**：信息窗口包含资源名称、类型、描述、地址等信息

### 地图控件

- **缩放工具**：支持地图缩放
- **比例尺**：显示地图比例尺
- **自定义标记**：红色水滴形状的标记点

## 四、自定义配置

### 修改地图中心点

在 `initMap` 函数中修改：

```typescript
map = new AMap.Map(mapContainer.value, {
  zoom: 12,  // 缩放级别 (3-18)
  center: [119.296, 26.075],  // [经度, 纬度]
  viewMode: "2D",  // 2D 或 3D
  resizeEnable: true
})
```

### 修改资源数据

在 `cultureResources` 中添加或修改资源，每个资源包含：

```typescript
{
  id: '唯一标识',
  name: '资源名称',
  type: '资源类型',
  cover: '封面图片地址',
  description: '资源描述',
  longitude: 119.300,  // 经度
  latitude: 26.075,    // 纬度
  address: '详细地址'
}
```

### 获取经纬度

可以使用高德地图拾取坐标系统：
https://lbs.amap.com/tools/picker

在地图上点击位置，即可获取该位置的经纬度坐标。

## 五、注意事项

1. **Key 安全**：生产环境务必配置白名单，限制 Key 的使用域名
2. **配额限制**：个人开发者账号有日调用量限制，请注意监控使用情况
3. **坐标系统**：高德地图使用 GCJ-02 坐标系（火星坐标系），如果你的数据是 WGS-84（GPS坐标），需要进行坐标转换

## 六、常见问题

### Q1: 地图不显示怎么办？
- 检查 API Key 是否正确配置
- 检查网络连接是否正常
- 查看浏览器控制台是否有错误信息

### Q2: 坐标不准确怎么办？
- 确认使用的是 GCJ-02 坐标系
- 使用高德地图拾取坐标系统重新获取坐标

### Q3: 如何更改地图样式？
可以在初始化时添加 `mapStyle` 参数，高德地图提供多种预设样式。

## 七、API 文档

高德地图 JavaScript API 文档：
https://lbs.amap.com/api/javascript-api/summary

## 八、技术支持

如遇到问题，可以：
1. 查看高德地图开发文档
2. 访问高德地图开发者社区：https://lbs.amap.com/dev/
3. 联系高德地图技术支持

