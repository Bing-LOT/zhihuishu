# 红色文化资源地图 - 快速开始

## 一、快速上手步骤

### 步骤 1：安装依赖（已完成）
```bash
npm install @amap/amap-jsapi-loader --save
```

### 步骤 2：获取高德地图 API Key

1. 访问 [高德开放平台](https://lbs.amap.com/)
2. 注册/登录账号
3. 进入 [控制台](https://console.amap.com/dev/key/app)
4. 创建新应用，选择 Web端(JS API)
5. 获取 Key（格式：`a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`）

### 步骤 3：配置 API Key

找到文件 `src/views/portal/Study/index.vue`，在 `initMap` 函数中修改：

```typescript
const AMap = await AMapLoader.load({
  key: "您的高德地图key",  // ⬅️ 替换为你的真实 Key
  version: "2.0",
  plugins: ["AMap.Scale", "AMap.ToolBar", "AMap.Marker"]
})
```

将 `"您的高德地图key"` 替换为你在步骤 2 获取的真实 Key。

### 步骤 4：启动项目

```bash
npm run dev
```

### 步骤 5：访问页面

打开浏览器访问：`http://localhost:5173/study`

进入"学习实践"页面，滚动到"红色文化资源地图（福州地区）"区块。

## 二、功能验证

✅ **地图加载**：应该看到福州地区的高德地图
✅ **默认标记**：地图上会显示第一个资源点（福建省革命历史纪念馆）的标记
✅ **资源列表**：左侧显示7个预设的红色文化资源
✅ **点击交互**：点击不同的资源，地图会自动定位并显示标记

## 三、功能特性

### 1. 地图交互
- ✅ 拖拽地图
- ✅ 缩放地图（鼠标滚轮 / 缩放按钮）
- ✅ 自动定位到资源位置

### 2. 资源标记
- ✅ 红色水滴形状的自定义标记
- ✅ 白色标签显示资源名称
- ✅ 点击标记显示详细信息

### 3. 信息窗口
- ✅ 资源名称和类型
- ✅ 资源描述
- ✅ 详细地址

### 4. 详情卡片
- ✅ 悬浮在地图右下角
- ✅ 显示当前选中资源的详细信息
- ✅ 包含资源封面图片
- ✅ 动态更新内容

### 4. 列表交互
- ✅ 点击资源列表项定位地图
- ✅ 激活状态高亮显示
- ✅ 搜索框（待实现）

## 四、预设资源数据

系统包含7个福州地区的红色文化资源点：

| 序号 | 资源名称 | 类型 | 位置 |
|------|---------|------|------|
| 1 | 福建省革命历史纪念馆 | 博物馆 | 福州市鼓楼区五四路263号 |
| 2 | 林觉民故居 | 人物故居 | 福州市鼓楼区杨桥东路 |
| 3 | 福州文林山革命烈士陵园 | 烈士陵园 | 福州市鼓楼区文林山 |
| 4 | 中共福建省委党校 | 党校 | 福州市鼓楼区柳河路61号 |
| 5 | 福州市委党群服务中心 | 党群中心 | 福州市鼓楼区古田路 |
| 6 | 福州市博物馆 | 纪念馆 | 福州市晋安区文博路8号 |
| 7 | 闽侯县五虎山革命根据地 | 革命地址 | 福州市闽侯县 |

## 五、常见问题

### Q1: 地图不显示，控制台报错 "INVALID_USER_KEY"
**原因**：API Key 未配置或配置错误
**解决**：检查是否正确替换了 API Key

### Q2: 地图加载很慢
**原因**：网络问题或 API 服务器响应慢
**解决**：检查网络连接，等待加载完成

### Q3: 坐标位置不准确
**原因**：坐标系统不匹配
**解决**：确保使用 GCJ-02（火星坐标系），可通过 [高德地图拾取坐标系统](https://lbs.amap.com/tools/picker) 重新获取

### Q4: 想要修改地图中心位置
**解决**：在 `initMap` 函数中修改：
```typescript
center: [119.296, 26.075],  // [经度, 纬度]
```

### Q5: 想要添加更多资源点
**解决**：在 `cultureResources` 数组中添加新的资源对象，包含以下字段：
```typescript
{
  id: '8',
  name: '新资源名称',
  type: '资源类型',
  cover: '/images/cover.jpg',
  description: '资源描述',
  longitude: 119.300,  // 经度
  latitude: 26.075,    // 纬度
  address: '详细地址'
}
```

## 六、目录结构

```
zhihuishu-app/
├── src/
│   └── views/
│       └── portal/
│           └── Study/
│               └── index.vue          # 主文件（包含地图功能）
├── 高德地图配置说明.md                 # API Key 配置详细说明
├── 红色文化资源地图使用说明.md          # 功能使用说明
└── 红色文化资源地图快速开始.md          # 快速开始指南（本文件）
```

## 七、核心代码说明

### 1. 地图初始化
```typescript
const initMap = async () => {
  const AMap = await AMapLoader.load({
    key: "您的高德地图key",
    version: "2.0",
    plugins: ["AMap.Scale", "AMap.ToolBar", "AMap.Marker"]
  })
  
  map = new AMap.Map(mapContainer.value, {
    zoom: 12,
    center: [119.296, 26.075],
    viewMode: "2D",
    resizeEnable: true
  })
}
```

### 2. 添加标记
```typescript
const addMarkerToMap = (resource) => {
  const marker = new AMap.Marker({
    position: [resource.longitude, resource.latitude],
    content: markerContent,  // 自定义HTML内容
    offset: new AMap.Pixel(-15, -60)
  })
  
  map.add(marker)
  map.setCenter([resource.longitude, resource.latitude])
}
```

### 3. 点击资源
```typescript
const selectResource = (resource) => {
  selectedResource.value = resource
  addMarkerToMap(resource)
}
```

## 八、下一步计划

- [ ] 接入后端 API 获取真实资源数据
- [ ] 实现搜索功能（按名称、类型、地址搜索）
- [ ] 同时显示所有资源标记（带聚合）
- [ ] 添加资源详情页链接
- [ ] 路线规划功能
- [ ] 移动端适配优化

## 九、技术栈

- **地图服务**：高德地图 JavaScript API 2.0
- **前端框架**：Vue 3 + TypeScript
- **地图加载器**：@amap/amap-jsapi-loader

## 十、相关链接

- [高德地图开放平台](https://lbs.amap.com/)
- [高德地图 JavaScript API 文档](https://lbs.amap.com/api/javascript-api/summary)
- [高德地图示例中心](https://lbs.amap.com/demo/list/js-api)
- [坐标拾取工具](https://lbs.amap.com/tools/picker)

## 十一、支持

如有问题，请查看：
1. `高德地图配置说明.md` - 详细配置步骤
2. `红色文化资源地图使用说明.md` - 功能详细说明
3. 高德地图开发者社区
4. 项目技术支持团队

---

**最后更新时间**：2025-12-25
**版本**：v1.0.0

