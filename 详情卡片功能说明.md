# è¯¦æƒ…å¡ç‰‡åŠŸèƒ½è¯´æ˜

## æ¦‚è¿°

åœ¨çº¢è‰²æ–‡åŒ–èµ„æºåœ°å›¾çš„å³ä¸‹è§’ï¼Œæˆ‘ä»¬ä¿ç•™å¹¶ä¼˜åŒ–äº†è¯¦æƒ…å¡ç‰‡åŠŸèƒ½ï¼Œå®ƒä¼šæ‚¬æµ®æ˜¾ç¤ºåœ¨é«˜å¾·åœ°å›¾ä¸Šæ–¹ï¼Œå®æ—¶æ˜¾ç¤ºå½“å‰é€‰ä¸­èµ„æºçš„è¯¦ç»†ä¿¡æ¯ã€‚

## åŠŸèƒ½ç‰¹æ€§

### 1. æ˜¾ç¤ºä½ç½®
- ğŸ“ **å›ºå®šä½ç½®**ï¼šåœ°å›¾å®¹å™¨å³ä¸‹è§’ï¼ˆbottom: 16px, right: 16pxï¼‰
- ğŸ¯ **å±‚çº§å…³ç³»**ï¼šæ‚¬æµ®åœ¨åœ°å›¾ä¸Šæ–¹ï¼Œä¸å½±å“åœ°å›¾äº¤äº’
- ğŸ“± **å“åº”å¼**ï¼šéšåœ°å›¾å®¹å™¨è‡ªé€‚åº”

### 2. æ˜¾ç¤ºå†…å®¹

è¯¦æƒ…å¡ç‰‡åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š

#### å·¦ä¾§ï¼šèµ„æºå°é¢
- å®½åº¦ï¼š160px
- é«˜åº¦ï¼š120px
- åœ†è§’ï¼š8px
- æ˜¾ç¤ºèµ„æºå°é¢å›¾ç‰‡

#### å³ä¾§ï¼šèµ„æºè¯¦æƒ…
1. **æ ‡é¢˜æ **
   - èµ„æºåç§°ï¼ˆå·¦ä¾§ï¼Œå¸¸è§„å­—ä½“ï¼‰
   - èµ„æºç±»å‹ï¼ˆå³ä¾§ï¼Œçº¢è‰²æ–‡å­— #bc2220ï¼‰

2. **æè¿°åŒº**
   - èµ„æºè¯¦ç»†æè¿°
   - å¤šè¡Œæ–‡æœ¬ï¼Œæœ€å¤šæ˜¾ç¤º3è¡Œ
   - è¶…å‡ºéƒ¨åˆ†æ˜¾ç¤ºçœç•¥å·

3. **åœ°å€æ **
   - ä½ç½®å›¾æ ‡ï¼ˆSVGï¼‰
   - è¯¦ç»†åœ°å€ä¿¡æ¯

### 3. åŠ¨æ€æ›´æ–°

è¯¦æƒ…å¡ç‰‡ä¼šéšç”¨æˆ·æ“ä½œè‡ªåŠ¨æ›´æ–°ï¼š

```
ç”¨æˆ·æ“ä½œ              â†’  è¯¦æƒ…å¡ç‰‡å˜åŒ–
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ç‚¹å‡»èµ„æºåˆ—è¡¨é¡¹        â†’  ç«‹å³æ›´æ–°æ˜¾ç¤ºè¯¥èµ„æºä¿¡æ¯
é¡µé¢åˆå§‹åŠ è½½          â†’  æ˜¾ç¤ºç¬¬ä¸€ä¸ªèµ„æºä¿¡æ¯
èµ„æºæ•°æ®ä¸ºç©º          â†’  ä¸æ˜¾ç¤ºå¡ç‰‡
```

## æŠ€æœ¯å®ç°

### Vue æ¨¡æ¿ä»£ç 

```vue
<!-- è¯¦æƒ…å¡ç‰‡ -->
<div v-if="selectedResource" class="map-detail-card" style="bottom: 16px; right: 16px;">
  <div class="map-detail-card__image">
    <img :src="selectedResource.cover" alt="" />
  </div>
  <div class="map-detail-card__content">
    <div class="map-detail-card__header">
      <span>{{ selectedResource.name }}</span>
      <span class="map-detail-card__type">{{ selectedResource.type }}</span>
    </div>
    <p class="map-detail-card__description">
      {{ selectedResource.description }}
    </p>
    <div class="map-detail-card__location">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
        <path d="M8 8.66667C8.73638 8.66667..." />
        <path d="M8 14C10 11.3333..." />
      </svg>
      <span>{{ selectedResource.address }}</span>
    </div>
  </div>
</div>
```

### å…³é”®æŠ€æœ¯ç‚¹

#### 1. æ¡ä»¶æ¸²æŸ“
```vue
v-if="selectedResource"
```
- ä»…åœ¨æœ‰é€‰ä¸­èµ„æºæ—¶æ˜¾ç¤ºå¡ç‰‡
- é¿å…ç©ºçŠ¶æ€æ˜¾ç¤º

#### 2. å“åº”å¼æ•°æ®ç»‘å®š
```typescript
const selectedResource = ref<CultureResource | null>(null)
```
- ä½¿ç”¨ Vue 3 çš„ ref åˆ›å»ºå“åº”å¼æ•°æ®
- èµ„æºåˆ‡æ¢æ—¶è‡ªåŠ¨æ›´æ–° UI

#### 3. æ•°æ®ç»“æ„
```typescript
interface CultureResource {
  id: string          // å”¯ä¸€æ ‡è¯†
  name: string        // èµ„æºåç§°
  type: string        // èµ„æºç±»å‹
  cover: string       // å°é¢å›¾ç‰‡URL
  description: string // èµ„æºæè¿°
  longitude: number   // ç»åº¦
  latitude: number    // çº¬åº¦
  address: string     // è¯¦ç»†åœ°å€
}
```

## æ ·å¼å®šä¹‰

### å¡ç‰‡å®¹å™¨
```css
.map-detail-card {
  position: absolute;
  width: 444px;
  background: white;
  border-radius: 8px;
  padding: 8px;
  display: flex;
  gap: 16px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15); /* å»ºè®®æ·»åŠ é˜´å½± */
  z-index: 1000; /* ç¡®ä¿åœ¨åœ°å›¾ä¸Šæ–¹ */
}
```

### å°é¢å›¾ç‰‡
```css
.map-detail-card__image {
  width: 160px;
  height: 120px;
  flex-shrink: 0;
  border-radius: 8px;
  overflow: hidden;
  background: #d9d9d9;
}
```

### å†…å®¹åŒºåŸŸ
```css
.map-detail-card__content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 8px;
}
```

### æ ‡é¢˜æ 
```css
.map-detail-card__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 16px;
  color: #333;
}

.map-detail-card__type {
  color: #bc2220;
}
```

### æè¿°æ–‡æœ¬
```css
.map-detail-card__description {
  flex: 1;
  margin: 0;
  font-size: 14px;
  color: #333;
  opacity: 0.5;
  line-height: 1.5;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 3;
  line-clamp: 3;
  -webkit-box-orient: vertical;
}
```

### åœ°å€æ 
```css
.map-detail-card__location {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 14px;
  color: #333;
  opacity: 0.5;
}
```

## ç”¨æˆ·äº¤äº’æµç¨‹

### åœºæ™¯1ï¼šåˆå§‹åŠ è½½
```
1. é¡µé¢åŠ è½½å®Œæˆ
   â†“
2. åœ°å›¾åˆå§‹åŒ–å®Œæˆ
   â†“
3. é»˜è®¤é€‰ä¸­ç¬¬ä¸€ä¸ªèµ„æº
   â†“
4. selectedResource.value = cultureResources.value[0]
   â†“
5. è¯¦æƒ…å¡ç‰‡æ˜¾ç¤ºç¬¬ä¸€ä¸ªèµ„æºä¿¡æ¯
```

### åœºæ™¯2ï¼šç‚¹å‡»èµ„æºåˆ—è¡¨
```
1. ç”¨æˆ·ç‚¹å‡»èµ„æºåˆ—è¡¨ä¸­çš„èµ„æº
   â†“
2. è§¦å‘ selectResource(resource) å‡½æ•°
   â†“
3. selectedResource.value = resource
   â†“
4. Vue å“åº”å¼ç³»ç»Ÿè‡ªåŠ¨æ›´æ–° UI
   â†“
5. è¯¦æƒ…å¡ç‰‡å†…å®¹ç«‹å³æ›´æ–°
   â†“
6. åœ°å›¾æ ‡è®°åŒæ­¥æ›´æ–°
```

## ä¸åœ°å›¾æ ‡è®°çš„ååŒ

è¯¦æƒ…å¡ç‰‡å’Œåœ°å›¾æ ‡è®°æ˜¯ä¸¤ç§äº’è¡¥çš„ä¿¡æ¯å±•ç¤ºæ–¹å¼ï¼š

| å¯¹æ¯”é¡¹ | è¯¦æƒ…å¡ç‰‡ | åœ°å›¾æ ‡è®°ä¿¡æ¯çª—å£ |
|--------|----------|------------------|
| æ˜¾ç¤ºä½ç½® | å›ºå®šåœ¨å³ä¸‹è§’ | è·Ÿéšæ ‡è®°ç‚¹ä½ç½® |
| æ˜¾ç¤ºæ–¹å¼ | å§‹ç»ˆæ˜¾ç¤º | ç‚¹å‡»æ ‡è®°å¼¹å‡º |
| å†…å®¹å®Œæ•´åº¦ | å®Œæ•´ä¿¡æ¯ | ç®€åŒ–ä¿¡æ¯ |
| äº¤äº’æ–¹å¼ | è¢«åŠ¨æ˜¾ç¤º | ä¸»åŠ¨ç‚¹å‡» |
| é€‚ç”¨åœºæ™¯ | å¿«é€Ÿæµè§ˆå½“å‰èµ„æº | æŸ¥çœ‹ç‰¹å®šæ ‡è®°è¯¦æƒ… |

### ååŒå·¥ä½œæµç¨‹

```
ç”¨æˆ·ç‚¹å‡»èµ„æºåˆ—è¡¨
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
â”‚             â”‚
â”‚  åœ°å›¾å®šä½   â”‚  è¯¦æƒ…å¡ç‰‡æ›´æ–°
â”‚  æ·»åŠ æ ‡è®°   â”‚  æ˜¾ç¤ºå®Œæ•´ä¿¡æ¯
â”‚  å¼¹å‡ºçª—å£   â”‚  
â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â†“
ç”¨æˆ·åŒæ—¶çœ‹åˆ°ï¼š
1. åœ°å›¾ä¸Šçš„ä½ç½®ï¼ˆæ ‡è®°ï¼‰
2. ç®€è¦ä¿¡æ¯ï¼ˆä¿¡æ¯çª—å£ï¼‰
3. å®Œæ•´ä¿¡æ¯ï¼ˆè¯¦æƒ…å¡ç‰‡ï¼‰
```

## ä¼˜åŒ–å»ºè®®

### 1. æ·»åŠ åŠ¨ç”»æ•ˆæœ
```css
.map-detail-card {
  transition: all 0.3s ease;
}

/* æ·¡å…¥åŠ¨ç”» */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.map-detail-card {
  animation: fadeIn 0.3s ease;
}
```

### 2. æ·»åŠ å…³é—­æŒ‰é’®ï¼ˆå¯é€‰ï¼‰
```vue
<div class="map-detail-card">
  <button class="map-detail-card__close" @click="selectedResource = null">
    <svg><!-- å…³é—­å›¾æ ‡ --></svg>
  </button>
  <!-- å…¶ä»–å†…å®¹ -->
</div>
```

### 3. å“åº”å¼é€‚é…
```css
/* ç§»åŠ¨ç«¯ä¼˜åŒ– */
@media (max-width: 768px) {
  .map-detail-card {
    width: calc(100% - 32px);
    bottom: 8px;
    right: 8px;
    left: 8px;
  }
  
  .map-detail-card__image {
    width: 100px;
    height: 75px;
  }
}
```

### 4. æ·»åŠ åŠ è½½çŠ¶æ€
```vue
<div v-if="selectedResource" class="map-detail-card">
  <div class="map-detail-card__image">
    <img 
      :src="selectedResource.cover" 
      alt=""
      @error="handleImageError"
      loading="lazy"
    />
  </div>
  <!-- å…¶ä»–å†…å®¹ -->
</div>
```

## å¸¸è§é—®é¢˜

### Q1: è¯¦æƒ…å¡ç‰‡ä¸æ˜¾ç¤ºæ€ä¹ˆåŠï¼Ÿ
**æ£€æŸ¥æ¸…å•**ï¼š
- âœ… ç¡®è®¤ `selectedResource` ä¸ä¸º null
- âœ… æ£€æŸ¥ `v-if` æ¡ä»¶æ˜¯å¦æ»¡è¶³
- âœ… æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
- âœ… ç¡®è®¤ CSS æ ·å¼æ˜¯å¦æ­£ç¡®åŠ è½½

### Q2: è¯¦æƒ…å¡ç‰‡è¢«åœ°å›¾é®æŒ¡æ€ä¹ˆåŠï¼Ÿ
**è§£å†³æ–¹æ¡ˆ**ï¼š
```css
.map-detail-card {
  z-index: 1000; /* å¢åŠ å±‚çº§ */
  position: absolute; /* ç¡®ä¿æ˜¯ç»å¯¹å®šä½ */
}
```

### Q3: å›¾ç‰‡åŠ è½½å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
**è§£å†³æ–¹æ¡ˆ**ï¼š
```vue
<img 
  :src="selectedResource.cover" 
  alt=""
  @error="handleImageError"
/>
```

```typescript
const handleImageError = (event: Event) => {
  const img = event.target as HTMLImageElement
  img.src = '/images/placeholder.png' // ä½¿ç”¨å ä½å›¾
}
```

### Q4: å†…å®¹è¿‡é•¿æº¢å‡ºæ€ä¹ˆåŠï¼Ÿ
**å·²å®ç°**ï¼š
```css
.map-detail-card__description {
  -webkit-line-clamp: 3; /* æœ€å¤šæ˜¾ç¤º3è¡Œ */
  text-overflow: ellipsis;
}
```

## æµ‹è¯•æ¸…å•

- [x] åˆå§‹åŠ è½½æ—¶æ˜¾ç¤ºç¬¬ä¸€ä¸ªèµ„æº
- [x] ç‚¹å‡»ä¸åŒèµ„æºæ—¶å†…å®¹æ­£ç¡®æ›´æ–°
- [x] å›¾ç‰‡æ­£ç¡®æ˜¾ç¤º
- [x] æ–‡æœ¬ä¸æº¢å‡ºå®¹å™¨
- [x] åœ°å€å›¾æ ‡æ­£ç¡®æ˜¾ç¤º
- [x] å¡ç‰‡ä½ç½®å›ºå®šåœ¨å³ä¸‹è§’
- [x] ä¸é˜»æŒ¡åœ°å›¾äº¤äº’
- [x] å“åº”å¼æ•°æ®ç»‘å®šå·¥ä½œæ­£å¸¸

## æ–‡ä»¶ä½ç½®

- **ä¸»æ–‡ä»¶**ï¼š`src/views/portal/Study/index.vue`
- **ç›¸å…³è¡Œæ•°**ï¼šç¬¬ 425-448 è¡Œï¼ˆæ¨¡æ¿éƒ¨åˆ†ï¼‰
- **æ ·å¼è¡Œæ•°**ï¼šç¬¬ 1662-1720 è¡Œï¼ˆæ ·å¼éƒ¨åˆ†ï¼‰

## æ€»ç»“

è¯¦æƒ…å¡ç‰‡æ˜¯çº¢è‰²æ–‡åŒ–èµ„æºåœ°å›¾çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå®ƒæä¾›äº†ä¸€ç§å§‹ç»ˆå¯è§çš„æ–¹å¼æ¥å±•ç¤ºå½“å‰é€‰ä¸­èµ„æºçš„å®Œæ•´ä¿¡æ¯ï¼Œä¸åœ°å›¾æ ‡è®°å’Œä¿¡æ¯çª—å£å…±åŒæ„æˆäº†å®Œæ•´çš„ä¿¡æ¯å±•ç¤ºä½“ç³»ã€‚

### æ ¸å¿ƒä»·å€¼
âœ… **æŒä¹…æ˜¾ç¤º**ï¼šä¸éœ€è¦ç‚¹å‡»å°±èƒ½çœ‹åˆ°è¯¦ç»†ä¿¡æ¯
âœ… **ä¿¡æ¯å®Œæ•´**ï¼šæ˜¾ç¤ºæ‰€æœ‰å…³é”®ä¿¡æ¯ï¼ˆå°é¢ã€åç§°ã€ç±»å‹ã€æè¿°ã€åœ°å€ï¼‰
âœ… **å“åº”åŠæ—¶**ï¼šéšèµ„æºåˆ‡æ¢ç«‹å³æ›´æ–°
âœ… **è§†è§‰ä¼˜é›…**ï¼šå›ºå®šä½ç½®ï¼Œä¸å¹²æ‰°åœ°å›¾æ“ä½œ

---

**æœ€åæ›´æ–°**ï¼š2025-12-25
**ç‰ˆæœ¬**ï¼šv1.1.0

